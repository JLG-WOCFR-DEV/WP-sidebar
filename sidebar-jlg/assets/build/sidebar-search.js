(()=>{"use strict";const e=window.React,a=JSON.parse('{"apiVersion":2,"name":"jlg/sidebar-search","title":"Sidebar JLG – Recherche","description":"Affiche le formulaire de recherche configuré via Sidebar JLG.","category":"widgets","icon":"search","keywords":["sidebar","search","jlg"],"textdomain":"sidebar-jlg","attributes":{"enable_search":{"type":"boolean","default":false},"search_method":{"type":"string","default":"default"},"search_alignment":{"type":"string","default":"flex-start"},"search_shortcode":{"type":"string","default":""}},"supports":{"html":false,"customClassName":false},"editorScript":"file:../../build/sidebar-search.js","viewScript":"file:../../build/sidebar-search-view.js"}'),r=window.wp.blocks,t=window.wp.i18n,s=window.wp.blockEditor,l=window.wp.components,c=window.wp.element;var i,n;const o=[{value:"default",label:(0,t.__)("Formulaire de recherche WordPress","sidebar-jlg")},{value:"shortcode",label:(0,t.__)("Shortcode personnalisé","sidebar-jlg")},{value:"hook",label:(0,t.__)('Hook "jlg_sidebar_search_area"',"sidebar-jlg")}],d=[{value:"flex-start",label:(0,t.__)("Alignement à gauche","sidebar-jlg")},{value:"center",label:(0,t.__)("Alignement centré","sidebar-jlg")},{value:"flex-end",label:(0,t.__)("Alignement à droite","sidebar-jlg")}],h=null!==(i=window.SidebarJlgSearchBlock?.defaults)&&void 0!==i?i:{},_=null!==(n=window.SidebarJlgSearchBlock?.blockName)&&void 0!==n?n:a.name;(0,r.registerBlockType)(a,{edit({attributes:a,setAttributes:r,clientId:i}){const n=(0,c.useRef)(!1);(0,c.useEffect)(()=>{if(n.current)return;n.current=!0;const e={};["enable_search","search_method","search_alignment","search_shortcode"].forEach(r=>{void 0===a[r]&&void 0!==h[r]&&(e[r]=h[r])}),Object.keys(e).length>0&&r(e)},[a,r]);const b=(0,c.useMemo)(()=>{var e,r,t,s;return{enable_search:null!==(e=a.enable_search)&&void 0!==e&&e,search_method:null!==(r=a.search_method)&&void 0!==r?r:"default",search_alignment:null!==(t=a.search_alignment)&&void 0!==t?t:"flex-start",search_shortcode:null!==(s=a.search_shortcode)&&void 0!==s?s:""}},[a.enable_search,a.search_method,a.search_alignment,a.search_shortcode]),m=(0,s.useBlockProps)({className:"sidebar-jlg-search-block"}),u=(0,c.useMemo)(()=>{switch(b.search_alignment){case"center":return"sidebar-search--align-center";case"flex-end":return"sidebar-search--align-end";default:return"sidebar-search--align-start"}},[b.search_alignment]);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(s.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:(0,t.__)("Options de recherche","sidebar-jlg"),initialOpen:!0},(0,e.createElement)(l.__experimentalVStack,{spacing:3},(0,e.createElement)(l.ToggleControl,{label:(0,t.__)("Activer la recherche","sidebar-jlg"),checked:!!b.enable_search,onChange:e=>r({enable_search:e})}),(0,e.createElement)(l.SelectControl,{label:(0,t.__)("Méthode de recherche","sidebar-jlg"),value:b.search_method,options:o,onChange:e=>r({search_method:e})}),(0,e.createElement)(l.SelectControl,{label:(0,t.__)("Alignement","sidebar-jlg"),value:b.search_alignment,options:d,onChange:e=>r({search_alignment:e})}),"shortcode"===b.search_method&&(0,e.createElement)(l.TextareaControl,{label:(0,t.__)("Shortcode","sidebar-jlg"),help:(0,t.__)("Le shortcode est exécuté côté front et doit retourner un formulaire de recherche.","sidebar-jlg"),value:b.search_shortcode,onChange:e=>r({search_shortcode:e})})))),(0,e.createElement)("div",{...m,"data-sidebar-search-block-name":_},(0,e.createElement)("div",{className:`sidebar-search sidebar-search--block ${u}`,"data-sidebar-search-align":b.search_alignment,style:{justifyContent:b.search_alignment}},(0,e.createElement)("div",{className:"sidebar-search__inner",style:{display:"flex",width:"100%",justifyContent:b.search_alignment}},b.enable_search?"shortcode"===b.search_method?b.search_shortcode?(0,e.createElement)("code",{className:"sidebar-search__shortcode-preview"},b.search_shortcode):(0,e.createElement)("div",{className:"sidebar-search__placeholder"},(0,t.__)("Ajoutez un shortcode valide pour afficher un aperçu.","sidebar-jlg")):"hook"===b.search_method?(0,e.createElement)("div",{className:"sidebar-search__placeholder"},(0,t.__)('Le contenu sera injecté via le hook "jlg_sidebar_search_area".',"sidebar-jlg")):(0,e.createElement)("form",{className:"sidebar-search__preview-form","aria-label":(0,t.__)("Formulaire de recherche","sidebar-jlg")},(0,e.createElement)("label",{htmlFor:`sidebar-search-input-${i}`,className:"screen-reader-text"},(0,t.__)("Rechercher :","sidebar-jlg")),(0,e.createElement)("div",{className:"sidebar-search__preview-fields"},(0,e.createElement)("input",{id:`sidebar-search-input-${i}`,type:"search",placeholder:(0,t.__)("Rechercher…","sidebar-jlg"),readOnly:!0}),(0,e.createElement)("button",{type:"submit",disabled:!0},(0,t.__)("Recherche","sidebar-jlg")))):(0,e.createElement)(l.Notice,{status:"info",isDismissible:!1},(0,t.__)("La recherche est désactivée pour cette instance.","sidebar-jlg"))))))},save:()=>null})})();